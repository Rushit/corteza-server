import:
  - github.com/cortezaproject/corteza-server/system/types

fields:
  - { field: ID }
  - { field: Name,                                   sortable: true,               }
  - { field: Handle,                                 sortable: true, unique: true, lookupFilterPreprocessor: lower }
  - { field: Meta,        type: "types.WorkflowMeta" }
  - { field: Enabled,     type: bool }
  - { field: Trace,       type: bool }
  - { field: KeepSession, type: bool }
  - { field: Scope,       type: "types.Variables" }
  - { field: OwnedBy }
  - { field: CreatedBy }
  - { field: UpdatedBy }
  - { field: DeletedBy }
  - { field: CreatedAt,                               sortable: true }
  - { field: UpdatedAt,                               sortable: true }
  - { field: DeletedAt,                               sortable: true }

lookups:
  - fields: [ ID ]
    description: |-
      searches for workflow by ID

      It returns workflow even if deleted or suspended
  - fields: [ Handle ]
    filter: { DeletedAt: nil }
    uniqueConstraintCheck: true
    description: |-
      searches for workflow by their handle

      It returns only valid workflows (not deleted, not suspended)

rdbms:
  alias: wf
  table: workflows
  customFilterConverter: true
